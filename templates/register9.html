    {% load static %}
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>iofrm</title>
        <link rel="stylesheet" type="text/css" href="{% static 'css/bootstrap.min.css' %}">
        <link rel="stylesheet" type="text/css" href="{% static 'css/fontawesome-all.min.css' %}">
        <link rel="stylesheet" type="text/css" href="{% static 'css/iofrm-style.css' %}">
        <link rel="stylesheet" type="text/css" href="{% static 'css/iofrm-theme9.css' %}">
        <link rel="stylesheet" type="text/css" href="{% static 'css/custom-style.css' %}">
        <!-- Toastr CSS -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css" rel="stylesheet"/>

<!-- Toastr JS -->
<style>
    .iofrm-layout {
        all: unset;
        display: flex;
        justify-content: flex-end;
    }
.col-md-5{
    width: 35.666667% !important;
}
.col-md-7{
    width: 63.666667% !important
}
@media (max-width: 767.98px) {
    .col-md-5, .col-md-7 {
        width: 100% !important;
    }
}
.page-links{
display: flex;
}
.form-holder{
    all: unset;
}
</style>

    </head>
    <body>
        <div class="form-body">
            <div class="iofrm-layout row">
                <div class="img-holder col-md-5">
                    <div class="bg"></div>
                    <div class="info-holder">
                        <h3>Get more things done with Loggin platform.</h3>
                        <p>Access to the most powerful tool in the entire design and web industry.</p>
                        <img src="{% static 'images/graphic5.svg' %}" alt="">
                    </div>
                </div>
                <div class="form-holder col-md-7">
                    <div class="form-content">
                        <div class="form-items">
                            <div class="website-logo-inside">
                                <a href="index.html">
                                    <div class="logo">
                                        <img class="logo-size" src="{% static 'images/logo-light.svg' %}" alt="">
                                    </div>
                                </a>
                            </div>
                            <div class="page-links">
                                <a href="{% url 'login' %}">Login</a><a href="{% url 'register' %}" class="active">Register</a>
                            </div>

                            <div  >

                                <div id="wizard_container"  >
                                    <div id="top-wizard">
                                        <div id="progressbar"></div>
                                    </div>
                                    <!-- /top-wizard -->
                                    <form name="example-1" id="wrapped" enctype="multipart/form-data">
                                      
                                        <div id="middle-wizard">
                                            <div class="step" id="step-1">
                                                <h3 class="main_question"><strong>1/4</strong> Personal Details</h3>
                                                <div class="row">
                                                    <div class="col-md-4">
                                                        <div class="form-group">
                                                            <label for="firstname">First Name (as per Aadhar and PAN)</label>
                                                            <input type="text" name="firstname" id="firstname" class="form-control required" placeholder="First Name">
                                                            <div class="invalid-feedback"></div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-4">
                                                        <div class="form-group">
                                                            <label for="lastname">Last Name (as per Aadhar and PAN)</label>
                                                            <input type="text" name="lastname" id="lastname" class="form-control required" placeholder="Last Name" >
                                                            <div class="invalid-feedback"></div>

                                                        </div>
                                                    </div>
                                                        <div class="col-md-4">
                                                            <div class="form-group">
                                                                <label for="dateofbirth">Date of Birth (as per Aadhar and PAN)</label>
                                                                <input type="date" id="dateofbirth" name="dateofbirth" class="form-control required" placeholder="Date of Birth">
                                                                <div class="invalid-feedback"></div>
                                                            </div>
                                                        </div>
                                                </div>
                                                <!-- /row -->

                                               
                                                <!-- /row -->
                                                <div class="row">
                                                    <div class="col-md-4">
                                                        <div class="form-group">
                                                            <label for="bloodgroup">Blood Group</label>
                                                            <div class="styled-select">
                                                                <select  id="bloodgroup" class="form-control required" name="bloodgroup">
                                                                    <option value="" selected>Blood Group</option>
                                                                    <option value="A+">A+</option>
                                                                    <option value="B+">B+</option>
                                                                    <option value="AB+">AB+</option>
                                                                    <option value="A-">A-</option>
                                                                    <option value="B-">B-</option>
                                                                    <option value="AB-">AB-</option>
                                                                    <option value="O+">O+</option>
                                                                    <option value="O-">O-</option>
                                                                </select>
                                                                <div class="invalid-feedback"></div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-4">
                                                        <div class="radio-wrapper-1">
                                                            <label>Gender</label><br>
                                                            <input id="male" type="radio" name="Gender" id ="gender" value="1" checked>
                                                            <label for="male">Male</label>
                                                            <input id="female" type="radio"  id = "gender" value="2" name="Gender">
                                                            <label for="female">Female</label>
                                                            <div class="invalid-feedback"></div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-4">
                                                        <div class="form-group">
                                                            <label for="maritalstatus">Marital Status</label>
                                                            <div class="styled-select">
                                                                <select id="maritalstatus" class="form-control required" name="maritalstatus">
                                                                    <option value="" selected>Marital Status</option>
                                                                    <option value="0">Single</option>
                                                                    <option value="1">Married</option>
                                                                    <option value="2">Divorced</option>
                                                                    <option value="3">Widowed</option>
                                                                </select>
                                                                <div class="invalid-feedback"></div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <!-- /row -->


                                                <!-- New fields -->
                                                <div class="row">
                                                    <div class="col-md-4" id ="marriagedate-field" style ="display:none">
                                                        <div class="form-group" id = "marriagedatefield" >
                                                            <label for="marriagedate">Marriage Date</label>
                                                            <input type="date" id="marriagedate" name="marriagedate" class="form-control required" placeholder="Marriage Date" >
                                                            <div class="invalid-feedback"></div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-6" id= "currentaddress-field">
                                                        <div class="form-group">
                                                            <label for="currentaddress">Current Address</label>
                                                            <textarea id="currentaddress" name="currentaddress" class="form-control required"  placeholder="Current Address"></textarea>
                                                            <div class="invalid-feedback"></div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-6" id = "phonenumber-field">
                                                        <div class="form-group">
                                                            <label for="phonenumber">Phone Number</label>
                                                            <input type="number" id="phonenumber" name="PhoneNumber" class="form-control required" placeholder="Phone Number">
                                                            <div class="invalid-feedback"></div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <!-- /row -->

                                                <!-- New fields -->
                                
                                                <div class="row">
                                                    <div class="col-md-6">
                                                       <div class="form-group">
                                                           <label for="uploadimage">Upload Image (JPEG or PNG only)</label>
                                                           <input type="file" id="uploadimage" name="uploadimage" class="form-control required" placeholder="Upload Image (captured from desktop front camera)">
                                                           <div class="invalid-feedback"></div>
                                                       </div>  
                                                    </div>
                                                    <div class="col-md-4">
                                                       <div class="form-group">
                                                           <label for="email">Email ID</label>
                                                           <input type="email" id="email" name="email" class="form-control required" placeholder="Email ID">
                                                           <div class="invalid-feedback"></div>
                                                       </div>
                                                   </div>
                                               
                                                   </div>
                                                   <!-- /row -->             
                                            </div>
                                            <!-- /step -->

                                            <div class="step" id="step-2" style="display:none;">
                                                <h3 class="main_question"><strong>2/4</strong> Account Security</h3>
                                                <div class="row">
                                                    <div class="col-md-6">
                                                        <div class="form-group">
                                                            <label for="password">Password</label>
                                                            <div class="input-group">
                                                                <input type="password" id="password" name="password" class="form-control required" placeholder="Password">
                                                                <div class="input-group-append">
                                                                    <span class="input-group-text" onclick="togglePasswordVisibility('password')">
                                                                        <i class="fa fa-eye"></i>
                                                                    </span>
                                                                </div>
                                                            </div>
                                                            <div class="invalid-feedback"></div>
                                                        </div>
                                                    </div>
                                                </div>
                                                
                                                <div class="row">
                                                    <div class="col-md-6">
                                                        <div class="form-group">
                                                            <label for="confirmpassword">Confirm Password</label>
                                                            <div class="input-group">
                                                                <input type="password" id="confirmpassword" name="confirmpassword" class="form-control required" placeholder="Confirm Password">
                                                                <div class="input-group-append">
                                                                    <span class="input-group-text" onclick="togglePasswordVisibility('confirmpassword')">
                                                                        <i class="fa fa-eye"></i>
                                                                    </span>
                                                                </div>
                                                            </div>
                                                            <div class="invalid-feedback"></div>
                                                        </div>
                                                    </div>
                                                </div>
                                                
                                                <!-- /row -->
                                            </div>
                                            <!-- /step -->

                                            <div class="step" id="step-3" style="display:none;">
                                                <h3 class="main_question"><strong>3/4</strong> Educational and Employment Details</h3>
                                                <div class="row">
                                                    <div class="col-md-6">
                                                        <div class="form-group">
                                                            <label for="highestqualification" >Highest Qualification (with a valid certificate)</label>
                                                                <input type="text" id="highestqualification" name="highestqualification" class="form-control required" placeholder="Highest Qualification with a valid certificate)">
                                                                <div class="invalid-feedback"></div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-md-6">
                                                            <div class="form-group">
                                                                <label for="roletype">Role Type</label>
                                                                <div class="styled-select">
                                                                    <select class="form-control required" id="roletype" name="RoleType">
                                                                        <option value="" selected>Role Type</option>
                                                                        <option value="Full-time">Full-time</option>
                                                                        <option value="Part-time">Part-time</option>
                                                                        <option value="Freelancer">Freelancer</option>
                                                                        <option value="Internship">Internship</option>
                                                                    </select>
                                                                    <div class="invalid-feedback"></div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>  
                                                <!-- /step-->
                                                
                                                
                                                <div class="step" id="step-4" style="display:none;">
                                                    <h3 class="main_question"><strong>4/4</strong> Financial and System Details</h3>
                                                    <div class="row">
                                                        <div class="col-md-4">
                                                            <div class="form-group">
                                                                <label for="pannumber">PAN Number</label>
                                                                <input type="text" id="pannumber" name="Pan" class="form-control required" placeholder="PAN Number" required>
                                                                <div class="invalid-feedback"></div>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-8">
                                                            <div class="form-group">
                                                                <label for="uploadpan">Upload PAN Card in JPEG or PNG only (scan and upload)</label>
                                                                <input type="file" id="uploadpan" name="uploadpan" class="form-control required" placeholder="Upload PAN Card (scan and upload)" required>
                                                                <div class="invalid-feedback"></div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <!-- /row -->
                                                    <div class="row">
                                                        <div class="col-md-4">
                                                            <div class="form-group">
                                                                <label for="bankname">Bank Name</label>
                                                                <input type="text" id="bankname" name="BankName" class="form-control required" placeholder="Bank Name" required>
                                                                <div class="invalid-feedback"></div>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-4">
                                                            <div class="form-group">
                                                                <label for="bankaccountnumber">Bank Account Number</label>
                                                                <input type="number" id="bankaccountnumber" name="BankAccountNumber" class="form-control required" placeholder="Bank Account Number" required>
                                                                <div class="invalid-feedback"></div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <!-- /row -->
                                                
                                                    <div class="row">
                                                        <div class="col-md-4">
                                                            <div class="form-group">
                                                                <label for="ifsccode">Bank IFSC Code</label>
                                                                <input type="text" id="ifsccode" name="BankIFSCCode" class="form-control required" placeholder="Bank IFSC Code" required>
                                                                <div class="invalid-feedback"></div>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-8">
                                                            <div class="form-group">
                                                                <label for="employeename">Employee Name (Bank Account Holder's Name)</label>
                                                                <input type="text" id="employeename" name="EmployeeName" class="form-control required" placeholder="Employee Name (Bank Account Holder's Name)" required>
                                                                <div class="invalid-feedback"></div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <!-- /row -->
                                                
                                                    <!-- New fields -->
                                                    <div class="row">
                                                        
                                                        <div class="col-md-8">
                                                            <div class="form-group">
                                                                    <label for="uploadaadharcard">Upload Aadhar Card JPEG/PNG only(front and back)</label>
                                                                    <input type="file" id="uploadaadharcard" name="UploadAadharCard" class="form-control required" placeholder="Upload Aadhar Card Scan (front and back in a single file)" required>
                                                                    <div class="invalid-feedback"></div>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-4">
                                                            <div class="form-group">
                                                                <label for="systemipaddress">System IP Address</label>
                                                                <input type="text" id="systemipaddress" name="SystemIPAddress" class="form-control required" placeholder="System IP Address" required>
                                                                <div class="invalid-feedback"></div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                   
                                                    <!-- /row -->
                                                </div>
                                                <!-- /step-->
                            
                                        <!-- /middle-wizard -->
                                       
                                        <div id="bottom-wizard">
                                            <button type="button" id="backward-button" class="backward" style="display:none;">Backward</button>
                                            <button type="button" id="forward-button" class="forward">Forward</button>
                                            <button type="button" id="register-btn" class="submit" style="display:none;">Submit</button>
                                          </div>
                                        <!-- /bottom-wizard -->
                                    </form>
                                </div>
                                <!-- /Wizard container -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    <script src="{% static 'js/jquery.min.js' %}"></script>
    <script src="{% static 'js/popper.min.js' %}"></script>
    <script src="{% static 'js/bootstrap.bundle.min.js' %}"></script>
    <script src="{% static 'js/main.js' %}"></script>
    <script src="{% static 'js/common_scripts_min.js' %}"></script>
   
    <script src="{% static 'js/velocity.min.js' %}"></script>
    <script src="{% static 'js/main.js' %}"></script> 
    <script src="{% static 'js/custom-js.js' %}"></script> 
    <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>

    <script>
        
        $(document).ready(function() {
    $('#register-btn').on('click', function(event) {

        event.preventDefault();

          var pancard = $('#pannumber').val();
          var uploadpan = $('#uploadpan').val();
          var bankname = $('#bankname').val();
          var bankaccountnumber = $('#bankaccountnumber').val();
          var ifsccode = $('#ifsccode').val();
          var employeename = $('#employeename').val();
          var uploadaadharcard = $('#uploadaadharcard').val();

         
          

          

        if(!pancard || !uploadpan || !bankname|| !bankaccountnumber || !ifsccode || !employeename || !uploadaadharcard){

            return
        }
        // Create a FormData object
        var formData = new FormData(); // Initialize an empty FormData object

        // Append form data manually
        formData.append('first_name', $('#firstname').val());
        formData.append('last_name', $('#lastname').val());
        formData.append('dob', $('#dateofbirth').val());
        formData.append('gndr', parseInt($('input[name="Gender"]:checked').val()));
        formData.append('blood_group', $('#bloodgroup').val());
        formData.append('marital_status', $('#maritalstatus').val());
        formData.append('marriage_date', $('#marriagedate').val());
        formData.append('current_address', $('#currentaddress').val());
        formData.append('phno', $('#phonenumber').val());
        formData.append('mail_id', $('#email').val());
        formData.append('password', $('#password').val());
        formData.append('password2', $('#confirmpassword').val());
        formData.append('qualification', $('#highestqualification').val());
        formData.append('rolename', $('#roletype').val());
        formData.append('pan', $('#pannumber').val());
        formData.append('bank_name', $('#bankname').val());
        formData.append('bank_acc', $('#bankaccountnumber').val());
        formData.append('bank_ifsc', $('#ifsccode').val());
        formData.append('bank_holder_name', $('#employeename').val());
        formData.append('ip_address', $('#systemipaddress').val());

        // Append file inputs
        var fileInputs = ['uploadimage', 'uploadpan', 'uploadaadharcard'];
        
        fileInputs.forEach(function(id) {
            var fileInput = document.getElementById(id);
            if (fileInput.files.length > 0) {
                formData.append(id, fileInput.files[0]);
            }
        });

        // Debugging FormData contents
        for (var pair of formData.entries()) {
            console.log(pair[0] + ': ' + pair[1]);
        }

        // Send data via AJAX
        $.ajax({
            url: 'https://sandbox.wemakesoftwares.com/register_api/', // API endpoint
            type: 'POST',
            data: formData, // Use FormData object
            processData: false, // Prevent jQuery from automatically processing the data
            contentType: false, // Prevent jQuery from setting the content type
            success: function(response) {
                console.log("response",response)
                // Handle success response
                toastr.success('Registration successful!','Success');

                var fileInputs = ['uploadimage', 'uploadpan', 'uploadaadharcard'];

                fileInputs.forEach(field =>{
                    allFileInputs = document.getElementById(field);
                    allFileInputs.value = "";
                })

                const inputFields = [
                    "firstname", "lastname", "dateofbirth", "bloodgroup", "maritalstatus",
                    "marriagedate", "currentaddress", "phonenumber", "email", "password",
                    "confirmpassword", "highestqualification", "roletype", "pannumber",
                    "bankname", "bankaccountnumber", "ifsccode", "employeename", "systemipaddress"
                ];
                inputFields.forEach(fieldId => {

                    allfields = document.getElementById(fieldId);
                        allfields.value ="";
                    localStorage.removeItem(fieldId);
                });

            },
            error: function(xhr, status, error) {
                console.log("error",error)
                console.log("status",status)
                console.log("xhr",xhr)
                // Handle error response
                var errors =xhr.responseJSON
                console.log(errors)
                var firstKey = Object.keys(errors)[0];
                var firstError = errors[firstKey][0];
                console.log(firstError)
               
              
                
               toastr.error(firstError, 'Error');
               toastr.options = {
                "closeButton": true,            // Show close button
                "debug": false,                 // Enable debug mode
                "newestOnTop": true,            // Show new notifications on top
                "progressBar": true,            // Show progress bar
                "positionClass": "toast-top-right", // Position of the toast
                "preventDuplicates": false,     // Prevent duplicate notifications
                "onclick": null,                // Add a click handler
                "showDuration": "300",          // How long to show the notification
                "hideDuration": "1000",         // How long it takes to hide
                "timeOut": "5000",              // How long the toast remains visible
                "extendedTimeOut": "1000",      // How long to show after mouse hover
                "showEasing": "swing",          // Show animation
                "hideEasing": "linear",         // Hide animation
                "showMethod": "fadeIn",         // Animation when showing
                "hideMethod": "fadeOut"         // Animation when hiding
            };
            
            }
        });
    });
});

    </script>
    
    </body>
    </html>
